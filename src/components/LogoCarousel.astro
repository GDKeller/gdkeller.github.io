---
import { Image } from "astro:assets";
import type { ImageMetadata } from "astro";

// Client logos
import logoAAM from "../images/logos/clients/logo_AAM.webp";
import logoADDitude from "../images/logos/clients/logo_ADDitude_white.png";
import logoAlley from "../images/logos/clients/logo_alley_white-transparent.png";
import logoCoolGreenScience from "../images/logos/clients/logo_CoolGreenScience.svg";
import logoCPJ from "../images/logos/clients/logo_CPJ.webp";
import logoDecider from "../images/logos/clients/logo_Decider.webp";
import logoHealthline from "../images/logos/clients/logo_healthline_white-transparent.png";
import logoKFF from "../images/logos/clients/logo_KFF-HealthNews.svg";
import logoLACPH from "../images/logos/clients/logo_LACPH.webp";
import logoMarinersMuseum from "../images/logos/clients/logo_MarinersMuseum_transparent.webp";
import logoNASA from "../images/logos/clients/logo_NASA.webp";
import logoNHMLA from "../images/logos/clients/logo_NHMLA_black.webp";
import logoNYP from "../images/logos/clients/logo_NYP_horizontal-red.png";
import logoPageSix from "../images/logos/clients/logo_PageSix_horizontal-white.png";
import logoRCFP from "../images/logos/clients/logo_RCFP.webp";
import logoS3Enterprise from "../images/logos/clients/logo_s3enterprise.jpg";
import logoStudio3 from "../images/logos/clients/logo_studio3.jpg";

interface Logo {
  src: ImageMetadata;
  alt: string;
}

const logos: Logo[] = [
  { src: logoNASA, alt: "NASA" },
  { src: logoNYP, alt: "New York Post" },
  { src: logoNHMLA, alt: "Natural History Museum of Los Angeles" },
  { src: logoHealthline, alt: "Healthline" },
  { src: logoLACPH, alt: "LA County Public Health" },
  { src: logoPageSix, alt: "Page Six" },
  { src: logoAAM, alt: "American Alliance of Museums" },
  { src: logoKFF, alt: "KFF Health News" },
  { src: logoCPJ, alt: "Committee to Protect Journalists" },
  { src: logoMarinersMuseum, alt: "The Mariners' Museum" },
  { src: logoDecider, alt: "Decider" },
  { src: logoCoolGreenScience, alt: "Cool Green Science" },
  { src: logoRCFP, alt: "Reporters Committee for Freedom of the Press" },
  { src: logoADDitude, alt: "ADDitude Magazine" },
  { src: logoAlley, alt: "Alley" },
  { src: logoS3Enterprise, alt: "S3 Enterprise" },
  { src: logoStudio3, alt: "Studio 3" },
];
---

<div
  class="logo-carousel relative mt-12 overflow-hidden md:mt-16"
  role="region"
  aria-label="Organizations I've worked with"
>
  <p
    id="carousel-heading"
    class="mb-4 text-center font-prompt text-xs uppercase tracking-widest text-white"
  >
    Trusted by
  </p>

  <div class="carousel-mask relative overflow-hidden" aria-labelledby="carousel-heading">
    <div class="carousel-track flex items-center gap-10 md:gap-14">
      {/* Primary logos - visible to screen readers */}
      {
        logos.map((logo) => (
          <div class="carousel-item flex-shrink-0">
            <Image
              src={logo.src}
              alt={logo.alt}
              class="max-h-12 w-auto max-w-[160px] object-contain md:max-h-16 md:max-w-[200px]"
              loading="eager"
            />
          </div>
        ))
      }
      {/* Duplicated logos for seamless scroll - hidden from screen readers */}
      {
        logos.map((logo) => (
          <div class="carousel-item--duplicate carousel-item flex-shrink-0" aria-hidden="true">
            <Image
              src={logo.src}
              alt=""
              class="max-h-16 w-auto max-w-[160px] object-contain md:max-h-24 md:max-w-[200px]"
              loading="eager"
            />
          </div>
        ))
      }
    </div>
  </div>
</div>

<style>
  .carousel-mask {
    mask-image: linear-gradient(to right, transparent, black 10%, black 90%, transparent);
    -webkit-mask-image: linear-gradient(to right, transparent, black 10%, black 90%, transparent);
  }

  .carousel-track {
    animation: scroll 40s linear infinite;
    width: max-content;
  }

  @keyframes scroll {
    0% {
      transform: translateX(0);
    }
    100% {
      transform: translateX(-50%);
    }
  }

  /* Reduced motion: show static grid instead of scrolling duplicates */
  @media (prefers-reduced-motion: reduce) {
    .carousel-mask {
      mask-image: none;
      -webkit-mask-image: none;
    }

    .carousel-track {
      animation: none;
      display: flex;
      flex-wrap: wrap;
      justify-content: center;
      gap: 1.5rem 2rem;
      width: 100%;
      padding: 0 1rem;
    }

    /* Hide duplicate logos in reduced motion mode */
    .carousel-item--duplicate {
      display: none;
    }
  }
</style>
