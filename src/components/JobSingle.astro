---
import Link from "./Link.astro";
import SkillBadge from "./SkillBadge.astro";

const { job } = Astro.props;
const { data } = job;
const { company, companyWebsite, position, startMonthYear, endMonthYear, tech } = data;
const { Content } = await job.render();
---

<div class="job-card relative z-20 mb-24 pt-8">
  <div
    class="mb-2 flex flex-col justify-start font-bayon text-2xl sm:flex-row md:text-2xl lg:text-3xl"
  >
    <h3>
      <span class="block font-bold text-fuchsia-500 sm:inline-block">{position}</span>
      <span class="mx-1 hidden font-bokor sm:inline-block">&nbsp;á …&nbsp;</span>
      <Link href={companyWebsite} target="_blank" class="no-underline">
        {company}
      </Link>
    </h3>
  </div>

  <p class="mb-6 italic">
    {startMonthYear ? startMonthYear : null} -
    {endMonthYear ? endMonthYear : "Present"}
  </p>

  {
    tech && (
      <div class="mb-10 mt-0 text-xs">
        <p class="sr-only">Skills:&nbsp;</p>
        <ul class="flex flex-wrap gap-2">
          {tech.map((t: string, i: number) => (
            <>
              <SkillBadge tag="li" class="mb-1" key={i}>
                {t}
              </SkillBadge>
              {i !== tech.length - 1 && " "}
            </>
          ))}
        </ul>
      </div>
    )
  }

  <div class="job-body list-custom-wrapper prose relative z-20 max-w-none bg-black pb-8 pr-8">
    <Content />
  </div>
  <span
    class="absolute -bottom-1 -right-1 -z-40 h-24 w-48 bg-gradient-to-br from-blue-900/10 via-teal-800/10 to-emerald-400/20 opacity-40"
  >
  </span>
</div>

<style>
  .job-card {
    &::before {
      @apply absolute -left-8 top-1 z-0 h-full max-h-96 w-1 bg-gradient-to-b from-emerald-400/20 via-teal-500/15 to-blue-950/20;
      content: "";
    }
    &::after {
      @apply absolute -left-8 -top-0 z-0 h-1 w-12 bg-gradient-to-r from-emerald-400/20 via-teal-500/15 to-blue-950/20;
      content: "";
    }
  }
  .job-body {
    p {
      @apply mb-5;

      &:last-child {
        @apply mb-0;
      }
    }

    ul {
      @apply mt-8;
    }
    li {
      @apply mb-2 pl-6;
    }

    a {
      @apply underline hover:text-fuchsia-500;
    }
  }
</style>
