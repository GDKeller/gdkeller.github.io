---
import Link from "./Link.astro";
import ProjectSingleImage from "./ProjectSingleImage.astro";
import Pill from "./Pill.astro";

const { project } = Astro.props;

const { data } = project;
const { title, client, startMonthYear, endMonthYear, clientWebsite, image, imageAlign, tech } =
  data;

const { Content } = await project.render();
---

<div class="job-card relative mb-20 block">
  <div
    class="mb-2 flex flex-col justify-start font-bayon text-2xl sm:flex-row sm:text-xl md:text-2xl lg:text-3xl"
  >
    <h3 class="font-bold text-fuchsia-500">{title}</h3>
    <span class="mx-2 hidden font-bokor sm:block"> @ </span>
    {
      clientWebsite ? (
        <Link href={clientWebsite} target="_blank">
          {client}
        </Link>
      ) : (
        <span>{client}</span>
      )
    }
  </div>
  <p class="mb-8 italic">
    {startMonthYear ? startMonthYear : null} -
    {endMonthYear ? endMonthYear : "Present"}
  </p>

  {
    tech && (
      <div class="mb-8 mt-0 text-xs">
        <p>
          <span class="sr-only">Technology used:&nbsp;</span>
          {tech.map((t: string, i: number) => (
            <>
              <Pill tag="span" key={i}>
                {t}
              </Pill>
              {i !== tech.length - 1 && " "}
            </>
          ))}
        </p>
      </div>
    )
  }

  <div
    class:list={[
      "relative",
      { "flex flex-col": imageAlign !== undefined },
      { "md:flex-row-reverse": imageAlign === "right" },
      { "md:flex-row": imageAlign === "left" },
    ]}
  >
    <div
      class:list={["mb-8", { "mr-8": imageAlign === "left" }, { "ml-8": imageAlign === "right" }]}
    >
      <ProjectSingleImage imagePath={image} altText={title} />
    </div>

    <div class="job-body prose">
      <Content />
    </div>
  </div>
</div>

<style>
  .job-body {
    p {
      @apply mb-5;

      &:last-child {
        @apply mb-0;
      }
    }

    li {
      list-style-type: disc;
      list-style-position: outside;
      @apply mb-2 ml-4 pl-2;
    }
  }
</style>
